# yaml-language-server: $schema=/epics/ibek-defs/ioc.schema.json

ioc_name: "{{  _global.get_env('IOC_NAME') }}"

description: auto-generated by https://github.com/epics-containers/builder2ibek

entities:
  - type: epics.EpicsEnvSet
    name: EPICS_TS_MIN_WEST
    value: "0"

  - type: epics.EpicsEnvSet
    name: STREAM_PROTOCOL_PATH
    value: /epics/runtime/protocol/

  - type: devIocStats.iocAdminSoft
    IOC: "{{ ioc_name | upper }}"

  - type: pvlogging.PvLogging
    access_file: /epics/support/pvlogging/src/access.acf

  - type: epics.EpicsCaMaxArrayBytes
    max_bytes: 9000000

  - type: epics.StartupCommand
    command: callbackSetQueueSize(10000)

  - type: epics.dbpf
    pv: BL23B-DI-UVCAM-01:CAM:GC_GevSCPSPacketSize
    value: "{1500}"

  - type: epics.dbpf
    pv: BL23B-DI-UVCAM-01:CAM:AcquirePeriod
    value: "{0.05}"

  - type: epics.dbpf
    pv: BL23B-DI-UVCAM-01:CONV:ColorModeOut
    value: "{'RGB1'}"

  - type: epics.dbpf
    pv: BL23B-DI-UVCAM-01:TIFF:FilePath
    value: "{'/dls/b23/epics/UV_Images'}"

  - type: epics.dbpf
    pv: BL23B-DI-UVCAM-01:TIFF:FileName
    value: "{'B23_UV'}"

  - type: epics.dbpf
    pv: BL23B-DI-UVCAM-01:TIFF:FileTemplate
    value: "{'%s%s_%d.tif'}"

  - type: epics.dbpf
    pv: BL23B-DI-UVCAM-01:FIMG:FilePath
    value: "{'/dls/b23/epics/UV_Images'}"

  - type: epics.dbpf
    pv: BL23B-DI-UVCAM-01:FIMG:FileName
    value: "{'B23_UV'}"

  - type: epics.dbpf
    pv: BL23B-DI-UVCAM-01:FIMG:FileTemplate
    value: "{'%s%s_%d.avi'}"

  - type: epics.dbpf
    pv: BL23B-DI-UVCAM-01:HDF5:FilePath
    value: "{'/dls/b23/epics/UV_Images'}"

  - type: epics.dbpf
    pv: BL23B-DI-UVCAM-01:HDF5:FileName
    value: "{'B23_UV'}"

  - type: epics.dbpf
    pv: BL23B-DI-UVCAM-01:HDF5:FileTemplate
    value: "{'%s%s_%d.h5'}"

  - type: epics.dbpf
    pv: BL23B-DI-UVCAM-01:JPEG:FilePath
    value: "{'/dls/b23/epics/UV_Images'}"

  - type: epics.dbpf
    pv: BL23B-DI-UVCAM-01:JPEG:FileName
    value: "{'B23_UV'}"

  - type: epics.dbpf
    pv: BL23B-DI-UVCAM-01:JPEG:FileTemplate
    value: "{'%s%s_%d.jpg'}"

  - type: ADAravis.aravisCamera
    BUFFERS: 200
    CLASS: AutoADGenICam
    ID: 10.93.6.10
    P: BL23B-DI-UVCAM-01
    PORT: UVCAM.CAM
    R: ":CAM:"

  # - type: ADCore.NDTransform
  #   ENABLED: 1
  #   NDARRAY_PORT: UVCAM.CAM
  #   P: BL23B-DI-UVCAM-01
  #   PORT: UVCAM.TRSF
  #   QUEUE: 50
  #   R: ":TRSF:"

  # - type: ADCore.NDColorConvert
  #   ENABLED: 1
  #   NDARRAY_PORT: UVCAM.TRSF
  #   P: BL23B-DI-UVCAM-01
  #   PORT: UVCAM.CONV
  #   QUEUE: 50
  #   R: ":CONV:"

  # - type: ADCore.NDROI
  #   ADDR: 0
  #   NDARRAY_ADDR: 0
  #   NDARRAY_PORT: UVCAM.TRSF
  #   P: BL23B-DI-UVCAM-01
  #   PORT: UVCAM.roi
  #   QUEUE: 16
  #   R: ":ROI:"
  #   TIMEOUT: 1

  # - type: ADCore.NDStats
  #   ADDR: 0
  #   HIST_SIZE: 65535
  #   NCHANS: 20000
  #   NDARRAY_ADDR: 0
  #   NDARRAY_PORT: UVCAM.TRSF
  #   P: BL23B-DI-UVCAM-01
  #   PORT: UVCAM.stat
  #   QUEUE: 16
  #   R: ":STAT:"
  #   TIMEOUT: 1
  #   XSIZE: 1024
  #   YSIZE: 768

  # - type: ADCore.NDStdArrays
  #   ADDR: 0
  #   FTVL: UCHAR
  #   NDARRAY_ADDR: 0
  #   NDARRAY_PORT: UVCAM.roi
  #   NELEMENTS: 786432
  #   P: BL23B-DI-UVCAM-01
  #   PORT: UVCAM.arr
  #   QUEUE: 2
  #   R: ":ARR:"
  #   TIMEOUT: 1
  #   TYPE: Int8

  # - type: ADCore.NDProcess
  #   ADDR: 0
  #   NDARRAY_ADDR: 0
  #   NDARRAY_PORT: UVCAM.TRSF
  #   P: BL23B-DI-UVCAM-01
  #   PORT: UVCAM.proc
  #   QUEUE: 16
  #   R: ":PROC:"
  #   TIMEOUT: 1

  # - type: ADCore.NDOverlay
  #   ADDR: 0
  #   NDARRAY_ADDR: 0
  #   NDARRAY_PORT: UVCAM.proc
  #   P: BL23B-DI-UVCAM-01
  #   PORT: UVCAM.over
  #   QUEUE: 16
  #   R: ":OVER:"
  #   TIMEOUT: 1

  # - type: ADCore.NDFileTIFF
  #   ADDR: 0
  #   NDARRAY_ADDR: 0
  #   NDARRAY_PORT: UVCAM.TRSF
  #   P: BL23B-DI-UVCAM-01
  #   PORT: UVCAM.tiff
  #   QUEUE: 16
  #   R: ":TIFF:"
  #   TIMEOUT: 1

  # - type: ADCore.NDFileHDF5
  #   ADDR: 0
  #   NDARRAY_ADDR: 0
  #   NDARRAY_PORT: UVCAM.TRSF
  #   P: BL23B-DI-UVCAM-01
  #   PORT: UVCAM.hdf
  #   QUEUE: 16
  #   R: ":HDF5:"
  #   TIMEOUT: 1

  # - type: ADCore.NDFileJPEG
  #   ENABLED: 1
  #   NDARRAY_PORT: UVCAM.CONV
  #   P: BL23B-DI-UVCAM-01
  #   PORT: UVCAM.JPEG
  #   QUEUE: 50
  #   R: ":JPEG:"
