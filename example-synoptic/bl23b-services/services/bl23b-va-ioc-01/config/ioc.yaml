# yaml-language-server: $schema=/epics/ibek-defs/ioc.schema.json

ioc_name: "{{  _global.get_env('IOC_NAME') }}"

description: auto-generated by https://github.com/epics-containers/builder2ibek

entities:
  - type: epics.EpicsEnvSet
    name: EPICS_TS_MIN_WEST
    value: "0"

  - type: epics.EpicsEnvSet
    name: STREAM_PROTOCOL_PATH
    value: /epics/runtime/protocol/

  - type: devIocStats.iocAdminSoft
    IOC: "{{ ioc_name | upper }}"

  # - type: IOCinfo.IOCinfo
  #   P: BL23B-VA-IOC-01

  - type: devIocStats.auto_ioc_vxworks
    IOCNAME: BL23B-VA-IOC-01

  - type: mrfTiming.EventReceiverPMC
    name: EVRNone

  - type: epics.InterruptVectorVME
    name: Vec1

  - type: ipac.Hy8001
    direction: Input
    interrupt_vector: Vec1
    invertin: true
    invertout: true
    slot: 4

  - type: ipac.Hy8002
    name: CARD5
    slot: 5

  - type: ipac.Hy8002
    name: CARD6
    slot: 6

  - type: epics.InterruptVectorVME
    name: Vec2

  - type: Hy8401ip.Hy8401
    carrier: CARD5
    interrupt_vector: Vec2
    ipslot: 0

  - type: epics.InterruptVectorVME
    name: Vec3

  - type: DLS8515.DLS8515
    carrier: CARD6
    interrupt_vector: Vec3
    ipslot: 0
    name: CARD60

  - type: asyn.AsynSerial
    name: ty_60_0
    port: /dev/tty600

  - type: asyn.AsynSerial
    name: ty_60_1
    port: /dev/tty601

  - type: asyn.AsynSerial
    name: ty_60_2
    port: /dev/tty602

  - type: asyn.AsynSerial
    name: ty_60_3
    port: /dev/tty603

  - type: asyn.AsynSerial
    name: ty_60_4
    port: /dev/tty604

  - type: DLS8515.DLS8515channel
    card: CARD60
    channel: 0
    parity: E

  - type: DLS8515.DLS8515channel
    card: CARD60
    channel: 1
    parity: E

  - type: DLS8515.DLS8515channel
    card: CARD60
    channel: 2

  - type: DLS8515.DLS8515channel
    card: CARD60
    channel: 3

  - type: DLS8515.DLS8515channel
    baud: 57600
    card: CARD60
    channel: 4
    data: 7
    parity: E
    stop: 2

  - type: digitelMpc.digitelMpc
    P: BL23B-VA-MPC-01
    name: IONPC1
    port: ty_60_2
    unit: "01"

  - type: digitelMpc.digitelMpc
    P: BL23B-VA-MPC-02
    name: IONPC2
    port: ty_60_3
    unit: "01"

  - type: digitelMpc.digitelMpcIonp
    MPC: IONPC1
    P: BL23B-VA-IONP-01
    proto: digitelMpc.proto
    pump: 1
    size: 300
    sp1off: 0
    sp1on: 0
    sp2off: 0
    sp2on: 0

  - type: digitelMpc.digitelMpcIonp
    MPC: IONPC1
    P: BL23B-VA-IONP-11
    proto: digitelMpc.proto
    pump: 2
    size: 50
    sp1off: 0
    sp1on: 0
    sp2off: 0
    sp2on: 0

  - type: digitelMpc.digitelMpcIonp
    MPC: IONPC2
    P: BL23B-VA-IONP-21
    proto: digitelMpc.proto
    pump: 1
    size: 150
    sp1off: 0
    sp1on: 0
    sp2off: 0
    sp2on: 0

  - type: digitelMpc.digitelMpcIonp
    MPC: IONPC2
    P: BL23B-VA-IONP-12
    proto: digitelMpc.proto
    pump: 2
    size: 150
    sp1off: 0
    sp1on: 0
    sp2off: 0
    sp2on: 0

  - type: mks937a.mks937a
    P: BL23B-VA-GCTLR-01
    name: GCTLR-01
    port: ty_60_0

  # - type: mks937a.mks937a
  #   P: BL23B-VA-GCTLR-02
  #   name: GCTLR-02
  #   port: ty_60_1

  - type: mks937a.mks937aImg
    GCTLR: GCTLR-01
    channel: 2
    P: BL23B-VA-IMG-01
    ilk_write_access_pv: BL23B-VA-GAUGE-01:ILKSETSP:NOWRITE

  - type: mks937a.mks937aImg
    GCTLR: GCTLR-01
    channel: 1
    P: BL23B-VA-IMG-11
    ilk_write_access_pv: BL23B-VA-GAUGE-11:ILKSETSP:NOWRITE

  # - type: mks937a.mks937aImg
  #   GCTLR: GCTLR-02
  #   channel: 1
  #   P: BL23B-VA-IMG-21
  #   ilk_write_access_pv: BL23B-VA-GAUGE-21:ILKSETSP:NOWRITE

  - type: mks937a.mks937aImg
    GCTLR: GCTLR-02
    channel: 2
    P: BL23B-VA-IMG-12
    ilk_write_access_pv: BL23B-VA-GAUGE-12:ILKSETSP:NOWRITE

  - type: mks937a.mks937aPirg
    GCTLR: GCTLR-01
    channel: 5
    P: BL23B-VA-PIRG-01
    ilk_write_access_pv: BL23B-VA-GAUGE-01:ILKSETSP:NOWRITE

  - type: mks937a.mks937aPirg
    GCTLR: GCTLR-01
    channel: 4
    P: BL23B-VA-PIRG-11
    ilk_write_access_pv: BL23B-VA-GAUGE-11:ILKSETSP:NOWRITE

  # - type: mks937a.mks937aPirg
  #   GCTLR: GCTLR-02
  #   channel: 4
  #   P: BL23B-VA-PIRG-21
  #   ilk_write_access_pv: BL23B-VA-GAUGE-21:ILKSETSP:NOWRITE

  - type: mks937a.mks937aPirg
    GCTLR: GCTLR-02
    channel: 5
    P: BL23B-VA-PIRG-12
    ilk_write_access_pv: BL23B-VA-GAUGE-12:ILKSETSP:NOWRITE

  # - type: mks937a.mks937aGauge
  #   P: BL23B-VA-GCTLR-01
  #   c: 50
  #   dom: BL23B
  #   id: 1
  #   name: GAUGE1
  #   s: 1

  # - type: mks937a.mks937aGauge
  #   P: BL23B-VA-GCTLR-01
  #   c: 50
  #   dom: BL23B
  #   id: 11
  #   name: GAUGE11
  #   s: 0

  # - type: mks937a.mks937aGauge
  #   P: BL23B-VA-GCTLR-02
  #   c: 50
  #   dom: BL23B
  #   id: 21
  #   name: GAUGE21
  #   s: 2

  # - type: mks937a.mks937aGauge
  #   P: BL23B-VA-GCTLR-02
  #   c: 50
  #   dom: BL23B
  #   id: 12
  #   name: GAUGE12
  #   s: 3

  - type: dlsPLC.read100
    century: 0
    P: BL23B-VA-VLVCC-01
    port: ty_60_4

  # - type: dlsPLC.vacValve
  #   addr: 10
  #   P: BL23B-VA-VALVE-11
  #   gilk0: ""
  #   gilk1: ""
  #   gilk10: ""
  #   gilk11: ""
  #   gilk12: ""
  #   gilk13: ""
  #   gilk14: ""
  #   gilk15: ""
  #   gilk2: ""
  #   gilk3: ""
  #   gilk4: ""
  #   gilk5: ""
  #   gilk6: ""
  #   gilk7: ""
  #   gilk8: ""
  #   gilk9: ""
  #   ilk0: Air pressure
  #   ilk1: IMG-01
  #   ilk10: ""
  #   ilk11: ""
  #   ilk12: ""
  #   ilk13: ""
  #   ilk14: ""
  #   ilk15: Valve Fault
  #   ilk2: IMG-11
  #   ilk3: PIRG-01
  #   ilk4: PIRG-11
  #   ilk5: ""
  #   ilk6: ""
  #   ilk7: ""
  #   ilk8: ""
  #   ilk9: ""
  #   name: GV1
  #   port: ty_60_4
  #   vlvcc: VLVCC1

  # - type: dlsPLC.vacValve
  #   addr: 20
  #   P: BL23B-VA-VALVE-21
  #   gilk0: ""
  #   gilk1: ""
  #   gilk10: ""
  #   gilk11: ""
  #   gilk12: ""
  #   gilk13: ""
  #   gilk14: ""
  #   gilk15: ""
  #   gilk2: ""
  #   gilk3: ""
  #   gilk4: ""
  #   gilk5: ""
  #   gilk6: ""
  #   gilk7: ""
  #   gilk8: ""
  #   gilk9: ""
  #   ilk0: Air pressure
  #   ilk1: IMG-01
  #   ilk10: ""
  #   ilk11: ""
  #   ilk12: ""
  #   ilk13: ""
  #   ilk14: ""
  #   ilk15: Valve Fault
  #   ilk2: IMG-21
  #   ilk3: PIRG-01
  #   ilk4: PIRG-21
  #   ilk5: ""
  #   ilk6: ""
  #   ilk7: ""
  #   ilk8: ""
  #   ilk9: ""
  #   name: GV2
  #   port: ty_60_4
  #   vlvcc: VLVCC1

  # - type: dlsPLC.vacValve
  #   addr: 30
  #   P: BL23B-VA-VALVE-31
  #   gilk0: ""
  #   gilk1: ""
  #   gilk10: ""
  #   gilk11: ""
  #   gilk12: ""
  #   gilk13: ""
  #   gilk14: ""
  #   gilk15: ""
  #   gilk2: ""
  #   gilk3: ""
  #   gilk4: ""
  #   gilk5: ""
  #   gilk6: ""
  #   gilk7: ""
  #   gilk8: ""
  #   gilk9: ""
  #   ilk0: Air pressure
  #   ilk1: IMG-01
  #   ilk10: ""
  #   ilk11: ""
  #   ilk12: ""
  #   ilk13: ""
  #   ilk14: ""
  #   ilk15: Valve Fault
  #   ilk2: IMG-12
  #   ilk3: PIRG-01
  #   ilk4: PIRG-12
  #   ilk5: ""
  #   ilk6: ""
  #   ilk7: ""
  #   ilk8: ""
  #   ilk9: ""
  #   name: GV3
  #   port: ty_60_4
  #   vlvcc: VLVCC1

  # - type: vacuumValve.externalValve
  #   P: FE23B-VA-VALVE-04
  #   name: FEV4

  # - type: vacuumValve.externalValve
  #   P: FE23B-RS-ABSB-01
  #   name: FAB

  # - type: vacuumValve.externalValve
  #   P: FE23B-PS-SHTR-01
  #   name: SHTR1

  # - type: vacuumValve.externalValve
  #   P: FE23B-PS-SHTR-02
  #   name: SHTR2

  - type: vacuumSpace.space
    P: BL23B-VA-SPACE-01
    gauge0: GAUGE1
    img0: IMG1
    ionp0: IONP1
    name: SP1
    pirg0: PIRG1
    valve0: FEV4

  - type: vacuumSpace.space
    P: BL23B-VA-SPACE-11
    gauge0: GAUGE11
    gauge1: GAUGE12
    img0: IMG11
    img1: IMG12
    ionp0: IONP11
    ionp1: IONP12
    name: SP11
    pirg0: PIRG11
    pirg1: PIRG12
    valve0: GV1

  - type: vacuumSpace.space
    P: BL23B-VA-SPACE-21
    gauge0: GAUGE21
    img0: IMG21
    ionp0: IONP21
    name: SP21
    pirg0: PIRG21
    valve0: GV2

  - type: dlsPLC.interlock
    addr: 9
    desc: Front End Permit
    P: BL23B-VA-VLVCC-01
    ilk0: IMG1 A2 Rly
    ilk1: ""
    ilk10: ""
    ilk11: ""
    ilk12: ""
    ilk13: ""
    ilk14: ""
    ilk15: ""
    ilk2: ""
    ilk3: ""
    ilk4: ""
    ilk5: ""
    ilk6: ""
    ilk7: ""
    ilk8: ""
    ilk9: ""
    interlock: :INT1
    name: ILK1
    port: ty_60_4

  - type: rackFan.rackFan
    c: 40
    P: BL23B-MO-FANC-01
    s: 0

  - type: rackFan.rackFan
    c: 40
    P: BL23B-VA-FANC-01
    s: 1

  - type: rackFan.rackFan
    c: 40
    P: BL23B-PS-PSU-01
    s: 4

  - type: rackFan.rackFan
    c: 40
    P: BL23B-PS-FANC-01
    s: 5

  - type: rackFan.rackFan
    c: 40
    P: BL23B-NT-FANC-01
    s: 6

  - type: rackFan.rackFan
    c: 40
    P: BL23B-DA-FANC-01
    s: 7

  - type: rackFan.rackFan
    c: 40
    P: BL23B-VA-RACK-01:PSU-01
    s: 8
